const l=(e,c)=>{const r=e.querySelector(".content__97a42da1 > span"),t=e.querySelector(".merItemThumbnail.medium__a6f874a2.thumbnail__97a42da1 > figure > div.imageContainer__f8ddf3a2 > picture > img"),n=e.querySelector("#clone-and-delete-item");return{name:r?r.textContent:null,imageUrl:t?t.getAttribute("src"):null,cloneAndDeleteItemSelector:n?`#currentListing > div.merList.border__17a1e07b.separator__17a1e07b > div:nth-child(${c}) > div.content__884ec505 > a > div > div > #clone-and-delete-item`:null}};chrome.runtime.onMessage.addListener(async(e,c,r)=>{if(e.action==="fetchSelectors"){let t=[],n=1;for(;;){const i=`#currentListing > div.merList.border__17a1e07b.separator__17a1e07b > div:nth-child(${n}) > div.content__884ec505 > a > div > div`;try{const o=document.querySelector(i);if(o){const a=l(o,n);t.push(a),n++}else break}catch(o){console.error("商品の取得中にエラーが発生しました。"),console.error(`Error : ${o}`);break}}console.log("全ての商品を取得しました。"),r({data:t})}return!0});chrome.runtime.onMessage.addListener((e,c,r)=>{if(e.action==="cloneAndDeleteItem"){const t=document.querySelector(e.selector);if(!t)throw new Error("要素が見つかりませんでした。");t.click(),r()}});
