(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const c of t.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function i(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function o(e){if(e.ep)return;e.ep=!0;const t=i(e);fetch(e.href,t)}})();document.addEventListener("DOMContentLoaded",()=>{chrome.tabs.query({active:!0,currentWindow:!0},r=>{if(r.length===0||r[0].id===void 0){console.error("No active tab found.");return}chrome.tabs.sendMessage(r[0].id,{action:"fetchSelectors"},n=>{if(chrome.runtime.lastError){console.error("Error:",chrome.runtime.lastError.message);return}const i=document.querySelector(".listings-container");if(i&&n&&n.data){let o=1;for(const e of n.data){const t=document.createElement("div");t.classList.add("listing-item"),t.dataset.itemSelector=e.cloneAndDeleteItemSelector?e.cloneAndDeleteItemSelector:"";const c=document.createElement("input");c.type="checkbox",c.id=`item-checkbox-${o}`,c.classList.add("item-checkbox");const d=document.createElement("div");d.classList.add("product-details");const s=document.createElement("label");s.htmlFor=`item-checkbox-${o}`,s.textContent=`${e.name??" "}`;const l=document.createElement("img");l.src=e.imageUrl??"",l.alt=e.name??"No image",d.appendChild(s),d.appendChild(l),t.appendChild(c),t.appendChild(d),i.appendChild(t),o++}}else console.error("No data received or container not found.")})})});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("start-button");if(!r)throw new Error("start-button is null");r.addEventListener("click",()=>{chrome.tabs.query({active:!0,currentWindow:!0},n=>{if(n.length>0&&n[0].id!==void 0){const i=Array.from(document.querySelectorAll(".listing-item")).filter(o=>{const e=o.querySelector('input[type="checkbox"]');return e?e.checked:null}).map(o=>o.dataset.itemSelector).filter(o=>o!==void 0);if(i.length===0){alert("再出品する商品を選択してください");return}chrome.runtime.sendMessage({action:"startListings",selectors:i})}else console.error("No active tab with a valid ID found.")})})});document.addEventListener("DOMContentLoaded",()=>{const r=document.getElementById("back-to-top");if(!r)throw new Error("上に戻るボタンが見つかりませんでした");r.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})});
